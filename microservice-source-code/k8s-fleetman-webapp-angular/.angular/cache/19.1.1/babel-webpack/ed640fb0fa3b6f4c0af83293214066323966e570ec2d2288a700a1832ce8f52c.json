{"ast":null,"code":"import { Vehicle } from './vehicle';\nimport { Subscription, BehaviorSubject, interval } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let VehicleService = /*#__PURE__*/(() => {\n  class VehicleService {\n    constructor(http) {\n      this.http = http;\n      this.source = interval(1000);\n      // Store local reference to Observable\n      // for use with template ( | async )\n      this.subscription = new BehaviorSubject(null);\n      this.centerVehicle = new BehaviorSubject(null);\n      this.timedUpdate = this.source.subscribe(val => this.http.get(\"http://\" + window.location.hostname + \":\" + window.location.port + \"/api/vehicles/\").subscribe(data => this.updateAllPositions(data)));\n    }\n    updateAllPositions(data) {\n      data.forEach(body => {\n        console.log(body);\n        let newVehicle = new Vehicle(body.name, Number(body.lat), Number(body.longitude), body.timestamp, Number(body.speed));\n        this.subscription.next(newVehicle);\n      });\n    }\n    updateCenterVehicle(centerVehicle) {\n      this.centerVehicle.next(centerVehicle);\n    }\n    static {\n      this.ɵfac = function VehicleService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || VehicleService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: VehicleService,\n        factory: VehicleService.ɵfac\n      });\n    }\n  }\n  return VehicleService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}